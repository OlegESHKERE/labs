# Terraform S3 Remote Backend

Цей проєкт створює інфраструктуру для зберігання Terraform стану в AWS S3 з блокуванням через DynamoDB.

## Компоненти

1. **S3 Bucket (terraform-state-labs)** - для зберігання файлів стану
   - Увімкнено версіонування
   - Увімкнено шифрування на стороні сервера (AES256)
   - Заблоковано публічний доступ

2. **DynamoDB Table (terraform-lock)** - для блокування стану під час операцій Terraform
   - Допомагає запобігти конфліктам при одночасній роботі

## Інструкція з використання

### 1. Розгортання бекенду

```bash
cd terraform_s3_backend
terraform init
terraform apply
```

### 2. Налаштування бекенду для інших лабораторних робіт

Після створення S3 бакета і DynamoDB таблиці, вам потрібно ініціалізувати кожен проєкт з новим бекендом:

```bash
cd lab1  # або інша лабораторна
terraform init -reconfigure
```

### 3. Перевірка конфігурації

Після успішної ініціалізації ви можете перевірити стан:

```bash
terraform state list
```

## Важливі примітки

- Кожна лабораторна робота має унікальний ключ в S3 бакеті
- Увімкнено `prevent_destroy` для S3 бакета, щоб запобігти випадковому видаленню
- Якщо потрібно видалити бекенд, спочатку змініть `prevent_destroy` на `false`

## Переваги використання S3 бекенду

1. **Колаборація** - дозволяє працювати над інфраструктурою кільком користувачам
2. **Версіонування** - зберігає історію змін стану
3. **Блокування** - запобігає конфліктам при одночасній роботі
4. **Безпека** - стан зберігається шифрованим в AWS S3 